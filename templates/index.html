<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Wordle RU</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #121213;
            color: white;
            text-align: center;
        }

        h1 {
            margin: 20px;
        }

        #grid {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            gap: 5px;
            justify-content: center;
            margin: 20px auto;
        }

        .cell {
            width: 60px;
            height: 60px;
            border: 2px solid #555;
            font-size: 32px;
            line-height: 60px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .green { background: #538d4e; }
        .yellow { background: #b59f3b; }
        .gray { background: #3a3a3c; }

        input {
            font-size: 20px;
            padding: 10px;
            text-transform: uppercase;
            width: 140px;
            text-align: center;
        }

        button {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>

<h1>Wordle RU</h1>

<div id="grid"></div>

<input id="wordInput" maxlength="5" placeholder="Ð¡Ð»Ð¾Ð²Ð¾">
<button onclick="checkWord()">OK</button>

<p id="result"></p>

<script>
let row = 0;
const maxRows = 6;
const grid = document.getElementById("grid");
const resultText = document.getElementById("result");

let secret = "";

// Create grid
for (let i = 0; i < 30; i++) {
    let div = document.createElement("div");
    div.className = "cell";
    grid.appendChild(div);
}

// Load secret
fetch("/secret")
.then(r => r.text())
.then(word => {
    secret = word.toUpperCase();
});

function showResult(win) {
    resultText.textContent = win ? "Ð¢Ñ‹ Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ð» ðŸ˜Ž" : "ÐŸÑ€Ð¾Ð¸Ð³Ñ€Ð°Ð» ðŸ˜¢ Ð¡Ð»Ð¾Ð²Ð¾: " + secret;
}

function checkWord() {

    const input = document.getElementById("wordInput");
    let guess = input.value.toUpperCase();

    if (guess.length !== 5) {
        alert("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ 5 Ð±ÑƒÐºÐ²");
        return;
    }

    let start = row * 5;

    let secretArr = secret.split("");
    let guessArr = guess.split("");

    let result = new Array(5).fill("gray");

    // Green
    for (let i = 0; i < 5; i++) {
        if (guessArr[i] === secretArr[i]) {
            result[i] = "green";
            secretArr[i] = null;
            guessArr[i] = null;
        }
    }

    // Yellow
    for (let i = 0; i < 5; i++) {
        if (guessArr[i] !== null) {
            let index = secretArr.indexOf(guessArr[i]);
            if (index !== -1) {
                result[i] = "yellow";
                secretArr[index] = null;
            }
        }
    }

    // Draw
    for (let i = 0; i < 5; i++) {
        let cell = grid.children[start + i];
        cell.textContent = guess[i];
        cell.classList.add(result[i]);
    }

    if (guess === secret) {
        showResult(true);
        return;
    }

    row++;

    if (row >= maxRows) {
        showResult(false);
    }

    input.value = "";
}
</script>

</body>
</html>



let secretArr = secret.split("");
    let guessArr = guess.split("");

    let result = new Array(5).fill("gray");


    /* GREEN */

    for (let i = 0; i < 5; i++) {

        if (guessArr[i] === secretArr[i]) {

            result[i] = "green";
            secretArr[i] = null;
            guessArr[i] = null;

        }
    }


    /* YELLOW */

    for (let i = 0; i < 5; i++) {

        if (guessArr[i] !== null) {

            let index = secretArr.indexOf(guessArr[i]);

            if (index !== -1) {

                result[i] = "yellow";
                secretArr[index] = null;

            }

        }
    }


    /* РИСУЕМ */

    for (let i = 0; i < 5; i++) {

        let cell = grid.children[start + i];

        cell.textContent = guess[i];
        cell.className = "cell " + result[i];

    }


    /* WIN */

    if (guess === secret) {
        showResult(true);
        return;
    }


    row++;


    /* LOSE */

    if (row >= maxRows) {
        showResult(false);
    }


    input.value = "";
}


/* ===== НОВАЯ ИГРА ===== */

function newGame() {

    fetch("/new")
        .then(() => {

            row = 0;
            resultText.textContent = "";
            input.value = "";

            for (let cell of grid.children) {
                cell.textContent = "";
                cell.className = "cell";
            }

            loadSecret();
        });
}


/* ===== ВИРТ КЛАВА ===== */

document.querySelectorAll("#keyboard .key").forEach(btn => {

    btn.addEventListener("mousedown", e => {
        e.preventDefault(); //
    });

    btn.addEventListener("click", () => {

        let key = btn.textContent;

        if (key === "ENTER") {
            checkWord();
            input.focus();
            return;
        }

        if (key === "⌫") {
            input.value = input.value.slice(0, -1);
            input.focus();
            return;
        }

        if (input.value.length < 5 && key.length === 1) {
            input.value += key;
            input.focus();
        }

    });

});


/* ===== ФИЗ КЛАВА ===== */

document.addEventListener("keydown", e => {

    if (e.key === "Enter") {
        checkWord();
    }

    if (e.key === "Backspace") {
        input.value = input.value.slice(0, -1);
    }

});

</script>

</body>
</html>

